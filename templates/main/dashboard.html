{% extends 'base.html' %}

{% block title %}Dashboard - ùïè-Pilot{% endblock %}

{% block content %}
<div class="dashboard-header">
    <h1>Dashboard</h1>
    <p>Welcome back, {{ current_user.name }}</p>
</div>

<div class="quota-tracker">
    <h2>Monthly Quota</h2>
    <div class="quota-progress">
        <div class="progress-bar" style="width: {{ quota_percentage|default(0) }}%">
            <span>{{ quota_used|default(0) }}/1500 posts</span>
        </div>
    </div>
    <p class="quota-reset">Resets on: <strong>{{ quota_reset_date|default('Not available') }}</strong></p>
</div>

<div class="dashboard-grid">
    <div class="dashboard-card">
        <h3>Quick Post</h3>
        <a href="{{ url_for('tweets.compose') }}" class="btn">New Tweet</a>
    </div>

    <div class="dashboard-card">
        <h3>Your Tweets</h3>
        <p>{{ tweet_count|default(0) }} tweets this month</p>
        <a href="{{ url_for('tweets.index') }}">View All</a>
    </div>

    <div class="dashboard-card">
        <h3>Profile Stats</h3>
        <p>Followers: <strong>{{ follower_count|default('N/A') }}</strong></p>
        <p>Following: <strong>{{ following_count|default('N/A') }}</strong></p>
        <a href="{{ url_for('users.profile') }}">View Profile</a>
    </div>

    <div class="dashboard-card">
        <h3>Scheduled Posts</h3>
        <p>{{ scheduled_count|default(0) }} upcoming posts</p>
        <a href="{{ url_for('tweets.scheduled') }}">Manage Schedule</a>
    </div>
</div>

<div class="recent-activity">
    <h2>Recent Activity</h2>
    {% if recent_tweets %}
    <ul class="activity-list">
        {% for tweet in recent_tweets %}
        <li class="activity-item">
            <span class="activity-time">{{ tweet.created_at.strftime('%b %d, %H:%M') }}</span>
            <span class="activity-content">{{ tweet.text }}</span>
        </li>
        {% endfor %}
    </ul>
    {% else %}
    <p>No recent activity to display.</p>
    {% endif %}
</div>
{% endblock %}
